<?xml version="1.0" encoding="UTF-8"?>
<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 256">
  <defs>
    <style>
      .thrust-track {
        fill: none;
        stroke-width: 10px;
        stroke: #666;
        stroke-linecap: round;
      }
      .thrust-indicator {
        fill: none;
        stroke-width: 1px;
        stroke: #fff;
      }
    </style>
  </defs>

  <line id="track" class="thrust-track" x1="50" y1="128" x2="462" y2="128"/>
  <line id="indicator" class="thrust-indicator" x1="256" y1="100" x2="256" y2="156"/>

  <text x="10" y="40" style="font-family: Arial; font-size: 40px; font-weight: bold; fill: white;">Left Thrust</text>
  <text x="20" y="180" style="font-family: Arial; font-size: 20px; fill: white;">-100%</text>
  <text x="230" y="180" style="font-family: Arial; font-size: 20px; fill: white;">0%</text>
  <text x="410" y="180" style="font-family: Arial; font-size: 20px; fill: white;">+100%</text>

  <script type="text/javascript">
    window.updateInstrument = function(percentage) {
      const indicator = document.getElementById('indicator');
      if (!indicator) return;

      // Clamp between -100 and +100
      const normalizedThrust = Math.max(-100, Math.min(100, percentage));

      // Map -100 to +100 to x position 50 to 462
      const xPosition = 256 + (normalizedThrust / 100) * 206;

      indicator.setAttribute('x1', xPosition);
      indicator.setAttribute('x2', xPosition);
    };

    // Check localStorage for updates (test mode takes priority over game mode)
    setInterval(() => {
      const testValue = localStorage.getItem('testMode_leftThrust');
      const gameValue = localStorage.getItem('leftThrust');
      if (testValue !== null) {
      window.updateInstrument(parseFloat(testValue));
    } else if (gameValue !== null) {
      window.updateInstrument(parseFloat(gameValue));
    }
    }, 50);
  </script>
</svg>
