<?xml version="1.0" encoding="UTF-8"?>
<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 512 256">
  <!-- Generator: Adobe Illustrator 29.8.3, SVG Export Plug-In . SVG Version: 2.1.1 Build 3)  -->
  <defs>
    <style>

 @font-face {
      font-family: "14-Segment-LED";
      src: url("14-Segment-LED-Regular.ttf ") format("truetype");
    }


      .st0 {
        font-size: 130px;
      }

      .st0, .st1 {
        fill: #0000ff;
        font-family: '14-Segment-LED';
        letter-spacing: 0em;
      }

      .st1 {
        font-size: 227px;
      }

      .st2 {
        fill: #000800;
      }
    </style>
  </defs>
  <rect class="st2" width="512" height="256"/>
  <text class="st1" transform="translate(10 156.2)"><tspan id="speedNum" x="0" y="0">125%</tspan></text>
  <text class="st0" transform="translate(10 251.7)"><tspan x="0" y="0">_SPEED_</tspan></text>

  <script type="text/javascript">
//<![CDATA[

    function updateSVG(instrumentValue){
      // Get the speedNum text element
      const speedNum = document.getElementById('speedNum');
      if (!speedNum) {
        console.log('Cant find speedNum element');
        return;
      }

      // Update the text content with percentage
      speedNum.textContent = instrumentValue + '%';
    }

    setInterval(() => {
      // Check localStorage for updates
      const thisSVGfilename = window.location.pathname;
      // this SVG expects a localStorage with the same name as its file
      const localStorageName = thisSVGfilename.substring(thisSVGfilename.lastIndexOf('/') + 1, thisSVGfilename.lastIndexOf('.'));
      let instrumentValue = localStorage.getItem(localStorageName);

      if (instrumentValue !== null) {
        // Make sure percentage is between 0 and 100
        instrumentValue = Math.max(0, Math.min(100, instrumentValue));
      } else {
        // no localStorage, so make up a number, so it swings back and forth
        // Initialize static variables if they don't exist
        if (typeof window.testValue === 'undefined') {
          window.testValue = 0;
          window.testDirection = 1; // 1 for increasing, -1 for decreasing
        }

        // Update the test value
        window.testValue += window.testDirection * 2; // increment by 2 each time

        // Reverse direction at boundaries
        if (window.testValue >= 100) {
          window.testValue = 100;
          window.testDirection = -1;
        } else if (window.testValue <= 0) {
          window.testValue = 0;
          window.testDirection = 1;
        }

        instrumentValue = window.testValue;
        console.log('no local storage "'+localStorageName+'", using test value:', instrumentValue);
      }

      updateSVG(instrumentValue);

    }, 50);  //end of setInterval code. 50 is 50 milliseconds or 20 times per second.

  //]]>
  </script>
</svg>