<?xml version="1.0" encoding="UTF-8"?>
<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 512 256">
  <defs>
    <style>
      .depth-track {
        fill: none;
        stroke-width: 10px;
        stroke: #666;
        stroke-linecap: round;
      }
      .depth-indicator {
        fill: none;
        stroke-width: 1px;
        stroke: #fff;
      }
    </style>
  </defs>

  <!-- Background horizontal track -->
  <line id="track" class="depth-track" x1="50" y1="128" x2="462" y2="128"/>

  <!-- Moving vertical indicator line -->
  <line id="indicator" class="depth-indicator" x1="50" y1="100" x2="50" y2="156"/>

  <!-- Labels -->
  <text x="10" y="40" style="font-family: Arial; font-size: 50px; font-weight: bold; fill: white;">Depth</text>
  <text x="30" y="100" style="font-family: Arial; font-size: 20px; fill: white;">Surface</text>
  <text x="390" y="100" style="font-family: Arial; font-size: 20px; fill: white;">Seabed</text>

  <script type="text/javascript">
    // ========================================
    // STUDENT EDIT ZONE
    // This script controls how the depth gauge displays
    // ========================================

    /**
     * Updates the depth gauge display
     * @param {number} depth - Depth level from 0 (surface) to 100 (seabed)
     *
     * How it works:
     * - The vertical indicator line moves horizontally to show depth
     * - 0 depth (surface) = x position at left (50)
     * - 50 depth (mid-water) = x position at middle (256)
     * - 100 depth (seabed) = x position at right (462)
     */
    window.updateInstrument = function(depth) {
      // Get the indicator line element
      const indicator = document.getElementById('indicator');
      if (!indicator) return;

      // Make sure depth is between 0 and 100
      const normalizedDepth = Math.max(0, Math.min(100, depth));

      // Calculate x position
      // Formula: 50 + (depth * 4.12) to map 0-100 to 50-462
      const xPosition = 50 + normalizedDepth * 4.12;

      // Update both x1 and x2 to move the vertical line
      indicator.setAttribute('x1', xPosition);
      indicator.setAttribute('x2', xPosition);
    };

    // Check localStorage for updates (test mode takes priority over game mode)
    setInterval(() => {
      const testValue = localStorage.getItem('testMode_depth');
      const gameValue = localStorage.getItem('game_depth');
      if (testValue !== null) {
      window.updateInstrument(parseFloat(testValue));
    } else if (gameValue !== null) {
      window.updateInstrument(parseFloat(gameValue));
    }
    }, 50);

    //console.log('Depth gauge script loaded');
  </script>
</svg>
